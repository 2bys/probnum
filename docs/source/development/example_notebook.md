# Adding an Example Notebook

Functionality of `probnum` is explained in detail in the form of `jupyter` notebooks in the [examples section](https://probabilistic-numerics.github.io/probnum/notebooks/examples.html) of the documentation. If you want to add an example showcasing the functionality of ProbNum, follow the instructions below.

## Creating the Notebook

We begin by creating a new `jupyter` notebook under `/docs/source/notebooks/`. If you want some guidance on the style, simply copy one of the existing notebooks. If you create your own ensure that the first cell is a markdown cell containing an upper level markdown header (`# Header`) to be converted correctly to `html`.

In order to keep the style of the output consistent, the first code cell of the notebook should contain the following code snippet:
```python
# Make inline plots vector graphics instead of raster graphics
%matplotlib inline
from IPython.display import set_matplotlib_formats
set_matplotlib_formats('pdf', 'svg')

# Plotting
import matplotlib.pyplot as plt
plt.rcParams['font.size'] = 18 
plt.rcParams['text.usetex'] = True
plt.rcParams['text.latex.preamble'] = [r'\usepackage{amsfonts}', 
                                       r'\usepackage{amsmath}', 
                                       r'\usepackage{bm}']
```
This snippet defines the style of plots generated by `matplotlib`. For example it defines the font and makes sure any output is a vector graphic. If you need to use specific LaTeX packages, e.g. to label your plots, simply add them to the list ``plt.rcParams['text.latex.preamble']``. 


## Adding the Notebook to the Website

Now that you've created your notebook, we have to add it in the right place on the website. Check the existing categories in `/docs/source/notebooks/examples.rst` and add your notebook name under the appropriate header. If you want to add a new category, use the following `restructuredText` snippet to add a new table of contents linking to your notebook:
```rst
.. toctree::
   :maxdepth: 2
   :caption: My Example Category:

   my_example_notebook
```

## Checking the Result

In order to see the result build the documentation locally via:
```bash
cd probnum/docs
make clean
make html
```
If the notebook compiles successfully you should see output similar to:
```bash
...
copying notebooks ... [100%] notebooks/uncertainties_odefilter.ipynb            
highlighting module code... [ 17%] probnum.filtsmooth.gaussfiltsmooth.gaussfiltshighlighting module code... [ 19%] probnum.filtsmooth.gaussfiltsmooth.linear_gauhighlighting module code... [ 20%] probnum.filtsmooth.gaussfiltsmooth.quad_gausshighlighting module code... [ 22%] probnum.filtsmooth.gaussfiltsmooth.taylor_gauhighlighting module code... [ 23%] probnum.filtsmooth.gaussfiltsmooth.unscentedthighlighting module code... [ 25%] probnum.filtsmooth.statespace.continuous.conthighlighting module code... [ 26%] probnum.filtsmooth.statespace.continuous.linehighlighting module code... [ 28%] probnum.filtsmooth.statespace.discrete.discrehighlighting module code... [ 30%] probnum.filtsmooth.statespace.discrete.discrehighlighting module code... [ 55%] probnum.optim.stoppingcriterion.stoppingcritehighlighting module code... [ 65%] probnum.prob.models.transitions.discretetranshighlighting module code... [ 73%] probnum.prob.randomprocess.kernels.brownianmohighlighting module code... [100%] scipy.sparse.linalg.interface                
writing additional pages...  searchdone
copying images... [  5%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 10%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 15%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 21%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 26%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 31%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 36%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 42%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 47%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 52%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 57%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 63%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 68%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 73%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 78%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 84%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 89%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [ 94%] notebooks/../../_build/html/.doctrees/nbsphinx/notebookcopying images... [100%] notebooks/../../_build/html/.doctrees/nbsphinx/notebooks_random_variables_16_0.svg
copying static files... ... done
copying extra files... done
dumping search index in English (code: en)... done
dumping object inventory... done
build succeeded
```
You can now view your results locally by opening the website in `docs/_build/html`. Make sure you fix any error messages popping up in the build before making a pull request to the `development` branch. Once your pull request has been merged, `travis` will automatically build the documentation including your new example notebook.